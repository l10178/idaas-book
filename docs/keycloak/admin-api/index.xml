<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Admin API on IDaaS Book</title><link>https://idaas.xlabs.club/docs/keycloak/admin-api/</link><description>Recent content in Admin API on IDaaS Book</description><generator>Hugo -- gohugo.io</generator><language>zh</language><copyright>Copyright (c) 2020-2024 nxest.com</copyright><atom:link href="https://idaas.xlabs.club/docs/keycloak/admin-api/index.xml" rel="self" type="application/rss+xml"/><item><title>用户增删改查</title><link>https://idaas.xlabs.club/docs/keycloak/admin-api/user-end2end/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://idaas.xlabs.club/docs/keycloak/admin-api/user-end2end/</guid><description>Keycloak Admin REST API，curl 模拟用户增加修改删除的完整例子。
#!/bin/bash HOST_IP=127.0.0.1 HOST_NAME=keycloak.example DEFAULT_REALM=master ADMIN_API_URL=http://${HOST_IP}/auth/admin/realms/${DEFAULT_REALM} USER_API_URL=${ADMIN_API_URL}/users # admin user ADMIN_NAME=xxx ADMIN_PWD=xxx parse_json() { echo &amp;#34;${1//\&amp;#34;/}&amp;#34; | sed &amp;#34;s/.*$2:\([^,}]*\).*/\1/&amp;#34; } echo &amp;#34;====Begin test user CRUD====&amp;#34; token_url=http://${HOST_IP}/auth/realms/${DEFAULT_REALM}/protocol/openid-connect/token # Get token, a json token_json=$(curl -X POST \ -H &amp;#34;host:${HOST_NAME}&amp;#34; \ -H &amp;#34;Content-Type: application/x-www-form-urlencoded&amp;#34; \ ${token_url} \ --data &amp;#39;grant_type=password&amp;#39; \ --data &amp;#39;client_id=admin-cli&amp;#39; \ --data &amp;#34;username=${ADMIN_NAME}&amp;#34; \ --data &amp;#34;password=${ADMIN_PWD}&amp;#34;) # get the `access_token` from the json token=$(parse_json &amp;#34;$token_json&amp;#34; &amp;#34;access_token&amp;#34;) # List users curl -X GET -H &amp;#34;Authorization: Bearer ${token}&amp;#34; \ -H &amp;#34;host:${HOST_NAME}&amp;#34; \ ${USER_API_URL} -v # Add new user username=usertest$(date &amp;#34;+%Y%m%d%H%M%S%s&amp;#34;) user={\&amp;#34;enabled\&amp;#34;:true,\&amp;#34;attributes\&amp;#34;:{},\&amp;#34;username\&amp;#34;:\&amp;#34;${username}\&amp;#34;,\&amp;#34;emailVerified\&amp;#34;:\&amp;#34;\&amp;#34;} echo &amp;#34;Begin create new user ${username}.</description></item></channel></rss>