<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="密码策略"><title>密码策略 | A book about IDaaS</title><link rel=icon href=/idaas-book/favicon/favicon-32x32.png type=image/x-icon><link rel=stylesheet href=/idaas-book/main.min.css media=screen><link rel=stylesheet href=/idaas-book/custom.css media=screen></head><body><div class=wrapper><input type=checkbox class=hidden id=menu-control><header class=gdoc-header><div class="container flex align-center justify-between"><label for=menu-control class=gdoc-nav__control><svg class="icon menu"><use xlink:href="#menu"/></svg><svg class="icon arrow-back"><use xlink:href="#arrow_back"/></svg></label><a class=gdoc-header__link href=https://l10178.github.io/idaas-book/><span class="gdoc-brand flex align-center"><img class=gdoc-brand__img src=/idaas-book/images/logos/logo.png alt="A book about IDaaS" width=38 height=38>
A book about IDaaS</span></a></div></header><main class="container flex flex-even"><aside class=gdoc-nav><nav><div class=gdoc-search><svg class="icon search"><use xlink:href="#search"/></svg><input type=text id=gdoc-search-input class=gdoc-search__input placeholder=Search... aria-label=Search maxlength=64><div class="gdoc-search__spinner spinner hidden"></div><ul id=gdoc-search-results class=gdoc-search__list></ul></div><section class=gdoc-nav--main><h2>Navigation</h2><ul class=gdoc-nav__list><li><span class=flex>Keycloak</span><ul class=gdoc-nav__list><li><span class=flex><a href=/idaas-book/keycloak/getting-started/ class=gdoc-nav__entry>Keycloak 简介</a></span></li><li><span class=flex>Admin API</span><ul class=gdoc-nav__list><li><span class=flex><a href=/idaas-book/keycloak/admin-api/user-end2end/ class=gdoc-nav__entry>用户增删改查</a></span></li></ul></li><li><span class=flex>Troubleshooting</span><ul class=gdoc-nav__list><li><span class=flex><a href=/idaas-book/keycloak/troubleshooting/https-required/ class=gdoc-nav__entry>Https Required</a></span></li><li><span class=flex><a href=/idaas-book/keycloak/troubleshooting/export-import-on-k8s/ class=gdoc-nav__entry>Kubernetes中导入导出</a></span></li><li><span class=flex><a href=/idaas-book/keycloak/troubleshooting/liquibase-mysql-group-replication/ class=gdoc-nav__entry>Liquibase MGR</a></span></li></ul></li><li><span class=flex>安全增强功能</span><ul class=gdoc-nav__list><li><span class=flex><a href=/idaas-book/keycloak/security-features/mfa/ class=gdoc-nav__entry>MFA-OTP</a></span></li><li><span class=flex><a href=/idaas-book/keycloak/security-features/password-policies/ class="gdoc-nav__entry is-active">密码策略</a></span></li><li><span class=flex><a href=/idaas-book/keycloak/security-features/brute-force-detection/ class=gdoc-nav__entry>暴力检测</a></span></li></ul></li></ul></li><li><span class=flex>参考资料</span><ul class=gdoc-nav__list><li><span class=flex><a href=/idaas-book/references/windows-ad/ class=gdoc-nav__entry>安装AD域服务并启用LDAPS</a></span></li></ul></li></ul></section><section class=gdoc-nav--more><h2>More</h2><ul class=gdoc-nav__list><li><span class=flex><svg class="icon download"><use xlink:href="#download"/></svg><a href=https://github.com/l10178/idaas-book/releases class=gdoc-nav__entry>Releases</a></span></li><li><span class=flex><svg class="icon github"><use xlink:href="#github"/></svg><a href=https://github.com/l10178/idaas-book class=gdoc-nav__entry>View Source</a></span></li></ul></section></nav></aside><div class=gdoc-page><div class="gdoc-page__header flex flex-wrap justify-between" itemscope itemtype=https://schema.org/Breadcrumb><span></span><span><svg class="icon code"><use xlink:href="#code"/></svg><a href=https://github.com/l10178/idaas-book/edit/main/content/keycloak/security-features/password-policies/index.md>Edit this page</a></span></div><article class=gdoc-markdown><h1>密码策略</h1><p>密码策略，常见的如密码最小长度、必须包含特殊字符、密码不能与历史密码相同等。控制用户在修改密码时，新密码必须满足一定的条件，从而增强密码安全。</p><p>Keycloak 内置了丰富的密码策略，满足常用的需求，不过默认都是不启用的，需要管理员主动设置。</p><p>启用方式，单击 <code>Authentication</code> 菜单，选择 <code>Password Policy</code> 选项卡。 在右侧下拉列表框中选择要添加的策略。根据策略提示设置不同的参数，保存。</p><p>密码策略只对新创建用户，或者用户修改密码生效，对已有用户不生效。如果想更快生效，就强制用户必须修改密码，在用户的 <code>Required User Actions</code> 里增加 <code>Update Password</code> 。</p><h2 id=密码策略类型>密码策略类型</h2><ul><li><p>HashAlgorithm</p><p>哈希算法，密码加密算法，以此算法存储，可根据官方指导自己实现算法。</p></li><li><p>Hashing Iterations</p><p>哈希次数，指定密码在存储或验证之前被哈希的次数。
多次哈希防止数据库泄露后，密码被暴力破解。哈希次数越多安全性越高，性能越差。</p></li><li><p>Minimum Length</p><p>密码最小长度。加大密码长度才是最有效的安全措施，什么大小写数字都是骗人的。</p></li><li><p>Digits</p><p>密码里必须包含 N 个数字。</p></li><li><p>Lowercase Characters</p><p>密码里必须包含 N 个小写字母。</p></li><li><p>Uppercase Characters</p><p>密码里必须包含 N 个大写字母。</p></li><li><p>Special Characters</p><p>密码里必须包含 N 个特殊字符，特殊字符如 <code>?!#%$</code> 。</p></li><li><p>Not Username</p><p>不能是当前用户名。</p></li><li><p>Not Email</p><p>不能是当前用户的邮箱。</p></li><li><p>Regular Expression</p><p>正则表达式，用 <code>java.util.regex.Pattern</code> 解析。</p></li><li><p>Expire Password</p><p>密码有效期，过期时间， N 天。超过这个时间后，用户必须修改密码。</p></li><li><p>Not Recently Used</p><p>密码历史，不能是最近使用过的 N 个密码。</p></li><li><p>Password Blacklist</p><p>密码黑名单，比如不能是常见的 <code>admin,test,123456</code> 等等，通过文件定制黑名单列表。</p></li></ul></article><div class="gdoc-page__footer flex flex-wrap justify-between"></div></div></main><footer class=gdoc-footer><div class="container flex flex-wrap"><span class=gdoc-footer__item>Copyright © 2020-2021 <a href=https://www.nxest.com class=gdoc-footer__link>nxest.com</a>.</span></div></footer></div><script defer src=/idaas-book/js/en.search.min.js></script></body></html>